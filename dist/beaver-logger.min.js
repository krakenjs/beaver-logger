!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("$logger",[],n):"object"==typeof exports?exports.$logger=n():e.$logger=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}Object.defineProperty(n,"__esModule",{value:!0});var o=t(1);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=r(o);n.default=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(2);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=t(11);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=t(13);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var a=t(9);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})});var u=t(10);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}})})},function(e,n,t){"use strict";function r(){return b}function o(e){b=e}function i(e,n,t){if("undefined"!=typeof window&&window.console&&window.console.log){if(!_)return setTimeout(function(){return i(e,n,t)},1);var r=g.config.logLevel;if(window.LOG_LEVEL&&(r=window.LOG_LEVEL),!(g.logLevels.indexOf(e)>g.logLevels.indexOf(r))){t=t||{};var o=[n];(0,p.isIE)()&&(t=JSON.stringify(t)),o.push(t),(t.error||t.warning)&&o.push("\n\n",t.error||t.warning);try{window.console[e]&&window.console[e].apply?window.console[e].apply(window.console,o):window.console.log&&window.console.log.apply&&window.console.log.apply(window.console,o)}catch(e){}}}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fireAndForget,r=void 0!==t&&t,o=e.fireBeacon,i=void 0!==o&&o;if("undefined"!=typeof window&&g.config.uri){var a=m.length,u=y.length;if(a||u){for(var c={},s=w.metaBuilders,f=Array.isArray(s),d=0,s=f?s:s[Symbol.iterator]();;){var l;if(f){if(d>=s.length)break;l=s[d++]}else{if(d=s.next(),d.done)break;l=d.value}var v=l;try{(0,p.extend)(c,v(c),!1)}catch(e){console.error("Error in custom meta builder:",e.stack||e.toString())}}for(var h={},_=w.headerBuilders,j=Array.isArray(_),E=0,_=j?_:_[Symbol.iterator]();;){var P;if(j){if(E>=_.length)break;P=_[E++]}else{if(E=_.next(),E.done)break;P=E.value}var k=P;try{(0,p.extend)(h,k(h),!1)}catch(e){console.error("Error in custom header builder:",e.stack||e.toString())}}var x=m,O=b(h,{events:x,meta:c,tracking:y},{fireAndForget:r,fireBeacon:i});return n.buffer=m=[],n.tracking=y=[],O}}}function u(e,n,t){m.push({level:e,event:n,payload:t}),g.config.autoLog.indexOf(e)>-1&&j()}function c(e,n,t){if("undefined"!=typeof window){g.config.prefix&&(n=g.config.prefix+"_"+n),t=t||{},"string"==typeof t?t={message:t}:t instanceof Error&&(t={error:t.stack||t.toString()});try{JSON.stringify(t)}catch(e){return}t.timestamp=Date.now();for(var r=w.payloadBuilders,o=Array.isArray(r),a=0,r=o?r:r[Symbol.iterator]();;){var c;if(o){if(a>=r.length)break;c=r[a++]}else{if(a=r.next(),a.done)break;c=a.value}var s=c;try{(0,p.extend)(t,s(t),!1)}catch(e){console.error("Error in custom payload builder:",e.stack||e.toString())}}g.config.silent||i(e,n,t),m.length===g.config.sizeLimit?u("info","logger_max_buffer_length"):m.length<g.config.sizeLimit&&u(e,n,t)}}function s(e){return{debug:function(n,t){return c("debug",e+"_"+n,t)},info:function(n,t){return c("info",e+"_"+n,t)},warn:function(n,t){return c("warn",e+"_"+n,t)},error:function(n,t){return c("error",e+"_"+n,t)},track:function(e){return h(e)},flush:function(){return j()}}}function f(e,n){return c("debug",e,n)}function d(e,n){return c("info",e,n)}function l(e,n){return c("warn",e,n)}function v(e,n){return c("error",e,n)}function h(e){if("undefined"!=typeof window&&e){try{JSON.stringify(e)}catch(e){return}for(var n=w.trackingBuilders,t=Array.isArray(n),r=0,n=t?n:n[Symbol.iterator]();;){var o;if(t){if(r>=n.length)break;o=n[r++]}else{if(r=n.next(),r.done)break;o=r.value}var a=o;try{(0,p.extend)(e,a(e),!1)}catch(e){console.error("Error in custom tracking builder:",e.stack||e.toString())}}i("debug","tracking",e),y.push(e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.track=n.flush=n.tracking=n.buffer=void 0,n.getTransport=r,n.setTransport=o,n.print=i,n.immediateFlush=a,n.log=c,n.prefix=s,n.debug=f,n.info=d,n.warn=l,n.error=v;var p=t(3),w=t(9),g=t(10),m=n.buffer=[],y=n.tracking=[],b=function(e,n,t){return(0,p.ajax)("post",g.config.uri,e,n,t)},_=!1;setTimeout(function(){_=!0},1);var j=(0,p.promiseDebounce)(a,g.config.debounceInterval);n.flush=j,n.track=h},function(e,n,t){"use strict";function r(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=e||{},n=n||{};for(var r in n)n.hasOwnProperty(r)&&(!t&&e.hasOwnProperty(r)||(e[r]=n[r]));return e}function o(e){return window.location.protocol===e.split("/")[0]}function i(e){var n=e.match(/https?:\/\/[^\/]+/);return!n||n[0]===window.location.protocol+"//"+window.location.host}function a(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},u=a.fireAndForget,c=void 0!==u&&u,s=a.fireBeacon,f=void 0!==s&&s;return new l.ZalgoPromise(function(a){var u=window.XMLHttpRequest||window.ActiveXObject;if(window.XDomainRequest&&!i(n)){if(!o(n))return a();u=window.XDomainRequest}var s=new u("MSXML2.XMLHTTP.3.0");if(s.open(e.toUpperCase(),n,!0),"function"==typeof s.setRequestHeader){s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("Content-type","application/json");for(var d in t)t.hasOwnProperty(d)&&s.setRequestHeader(d,t[d])}c?a():s.onreadystatechange=function(){s.readyState>3&&a()},window.navigator&&window.navigator.sendBeacon&&f&&window.navigator.sendBeacon(n,JSON.stringify(r).replace(/&/g,"%26")),s.send(JSON.stringify(r).replace(/&/g,"%26"))})}function u(e,n){var t={};return function(){var r=arguments;return t.timeout&&(clearTimeout(t.timeout),delete t.timeout),t.timeout=setTimeout(function(){var n=t.resolver,o=t.rejector;return delete t.promise,delete t.resolver,delete t.rejector,delete t.timeout,l.ZalgoPromise.resolve().then(function(){return e.apply(null,r)}).then(n,o)},n),t.promise=t.promise||new l.ZalgoPromise(function(e,n){t.resolver=e,t.rejector=n}),t.promise}}function c(){return new l.ZalgoPromise(function(e){"undefined"!=typeof document&&"complete"===document.readyState&&e(),window.addEventListener("load",e)})}function s(e,n){function t(){r=setTimeout(function(){e(),t()},n)}var r=void 0;return t(),{cancel:function(){clearTimeout(r)}}}function f(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})}function d(){return Boolean(window.document.documentMode)}Object.defineProperty(n,"__esModule",{value:!0}),n.extend=r,n.isSameProtocol=o,n.isSameDomain=i,n.ajax=a,n.promiseDebounce=u,n.onWindowReady=c,n.safeInterval=s,n.uniqueID=f,n.isIE=d;var l=t(4)},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(5);Object.defineProperty(n,"ZalgoPromise",{enumerable:!0,get:function(){return r.ZalgoPromise}})},function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.ZalgoPromise=void 0;var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=t(6),a=t(7),u=t(8),c=function(){function e(n){var t=this;if(r(this,e),this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],n){var o=void 0,i=void 0,a=!1,c=!1,s=!1;(0,u.startActive)();try{n(function(e){s?t.resolve(e):(a=!0,o=e)},function(e){s?t.reject(e):(c=!0,i=e)})}catch(e){return(0,u.endActive)(),void this.reject(e)}(0,u.endActive)(),s=!0,a?this.resolve(o):c&&this.reject(i)}if(__DEBUG__)try{throw new Error("ZalgoPromise")}catch(e){this.stack=e.stack}}return o(e,[{key:"resolve",value:function(e){if(this.resolved||this.rejected)return this;if((0,i.isPromise)(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this}},{key:"reject",value:function(e){var n=this;if(this.resolved||this.rejected)return this;if((0,i.isPromise)(e))throw new Error("Can not reject promise with another promise");if(!e){var t=e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e);e=new Error("Expected reject to be called with Error, got "+t)}return this.rejected=!0,this.error=e,this.errorHandled||setTimeout(function(){n.errorHandled||(0,a.dispatchPossiblyUnhandledError)(e,n)},1),this.dispatch(),this}},{key:"asyncReject",value:function(e){return this.errorHandled=!0,this.reject(e),this}},{key:"dispatch",value:function(){var n=this,t=this.dispatching,r=this.resolved,o=this.rejected,a=this.handlers;if(!t&&(r||o)){this.dispatching=!0,(0,u.startActive)();for(var c=function(t){var u=a[t],c=u.onSuccess,s=u.onError,f=u.promise,d=void 0;if(r)try{d=c?c(n.value):n.value}catch(e){return f.reject(e),"continue"}else if(o){if(!s)return f.reject(n.error),"continue";try{d=s(n.error)}catch(e){return f.reject(e),"continue"}}d instanceof e&&(d.resolved||d.rejected)?(d.resolved?f.resolve(d.value):f.reject(d.error),d.errorHandled=!0):(0,i.isPromise)(d)?d instanceof e&&(d.resolved||d.rejected)?d.resolved?f.resolve(d.value):f.reject(d.error):d.then(function(e){f.resolve(e)},function(e){f.reject(e)}):f.resolve(d)},s=0;s<a.length;s++){c(s)}a.length=0,this.dispatching=!1,(0,u.endActive)()}}},{key:"then",value:function(n,t){if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for success handler");if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.then expected a function for error handler");var r=new e;return this.handlers.push({promise:r,onSuccess:n,onError:t}),this.errorHandled=!0,this.dispatch(),r}},{key:"catch",value:function(e){return this.then(void 0,e)}},{key:"finally",value:function(n){if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.finally expected a function");return this.then(function(t){return e.try(n).then(function(){return t})},function(t){return e.try(n).then(function(){throw t})})}},{key:"timeout",value:function e(n,t){var r=this;if(this.resolved||this.rejected)return this;var e=setTimeout(function(){r.resolved||r.rejected||r.reject(t||new Error("Promise timed out after "+n+"ms"))},n);return this.then(function(n){return clearTimeout(e),n})}},{key:"toPromise",value:function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)}}],[{key:"resolve",value:function(n){return n instanceof e?n:(0,i.isPromise)(n)?new e(function(e,t){return n.then(e,t)}):(new e).resolve(n)}},{key:"reject",value:function(n){return(new e).reject(n)}},{key:"asyncReject",value:function(n){return(new e).asyncReject(n)}},{key:"all",value:function(n){var t=new e,r=n.length,o=[];if(!r)return t.resolve(o),t;for(var a=function(a){var u=n[a];if(u instanceof e){if(u.resolved)return o[a]=u.value,r-=1,"continue"}else if(!(0,i.isPromise)(u))return o[a]=u,r-=1,"continue";e.resolve(u).then(function(e){o[a]=e,r-=1,0===r&&t.resolve(o)},function(e){t.reject(e)})},u=0;u<n.length;u++){a(u)}return 0===r&&t.resolve(o),t}},{key:"hash",value:function(n){var t={};return e.all(Object.keys(n).map(function(r){return e.resolve(n[r]).then(function(e){t[r]=e})})).then(function(){return t})}},{key:"map",value:function(n,t){return e.all(n.map(t))}},{key:"onPossiblyUnhandledException",value:function(e){return(0,a.onPossiblyUnhandledException)(e)}},{key:"try",value:function(n,t,r){if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.try expected a function");var o=void 0;(0,u.startActive)();try{o=n.apply(t,r||[])}catch(n){return(0,u.endActive)(),e.reject(n)}return(0,u.endActive)(),e.resolve(o)}},{key:"delay",value:function(n){return new e(function(e){setTimeout(e,n)})}},{key:"isPromise",value:function(n){return!!(n&&n instanceof e)||(0,i.isPromise)(n)}},{key:"flush",value:function(){return(0,u.awaitActive)(e)}}]),e}();n.ZalgoPromise=c},function(e,n){"use strict";function t(e){try{if(!e)return!1;if("undefined"!=typeof Promise&&e instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&e instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&e instanceof window.constructor)return!1;var n={}.toString;if(n){var t=n.call(e);if("[object Window]"===t||"[object global]"===t||"[object DOMWindow]"===t)return!1}if("function"==typeof e.then)return!0}catch(e){return!1}return!1}Object.defineProperty(n,"__esModule",{value:!0}),n.isPromise=t},function(e,n){"use strict";function t(e,n){if(o.indexOf(e)===-1){o.push(e),setTimeout(function(){if(__DEBUG__)throw new Error((e.stack||e.toString())+"\n\nFrom promise:\n\n"+n.stack);throw e},1);for(var t=0;t<i.length;t++)i[t](e,n)}}function r(e){return i.push(e),{cancel:function(){i.splice(i.indexOf(e),1)}}}Object.defineProperty(n,"__esModule",{value:!0}),n.dispatchPossiblyUnhandledError=t,n.onPossiblyUnhandledException=r;var o=[],i=[]},function(e,n){"use strict";function t(){if(!a&&u){var e=u;u=null,e.resolve()}}function r(){a+=1}function o(){a-=1,t()}function i(e){var n=u=u||new e;return t(),n}Object.defineProperty(n,"__esModule",{value:!0}),n.startActive=r,n.endActive=o,n.awaitActive=i;var a=0,u=void 0},function(e,n){"use strict";function t(e){a.push(e)}function r(e){u.push(e)}function o(e){c.push(e)}function i(e){s.push(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.addPayloadBuilder=t,n.addMetaBuilder=r,n.addTrackingBuilder=o,n.addHeaderBuilder=i;var a=n.payloadBuilders=[],u=n.metaBuilders=[],c=n.trackingBuilders=[],s=n.headerBuilders=[]},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.config={uri:"",prefix:"",initial_state_name:"init",flushInterval:6e5,debounceInterval:10,sizeLimit:300,silent:!1,heartbeat:!0,heartbeatConsoleLog:!0,heartbeatInterval:5e3,heartbeatTooBusy:!1,heartbeatTooBusyThreshold:1e4,logLevel:"warn",autoLog:["warn","error"],logUnload:!0,logPerformance:!0},n.logLevels=["error","warn","info","debug"]},function(e,n,t){"use strict";function r(e){(0,i.extend)(o.config,e||{}),c||(c=!0,o.config.logPerformance&&(0,a.initPerformance)(),o.config.heartbeat&&(0,a.initHeartBeat)(),o.config.logUnload&&(window.addEventListener("beforeunload",function(){(0,u.info)("window_beforeunload"),(0,u.immediateFlush)({fireAndForget:!0,fireBeacon:!0})}),window.addEventListener("unload",function(){(0,u.info)("window_unload"),(0,u.immediateFlush)({fireAndForget:!0,fireBeacon:!0})})),o.config.flushInterval&&setInterval(u.flush,o.config.flushInterval),window.beaverLogQueue&&(window.beaverLogQueue.forEach(function(e){(0,u.log)(e.level,e.event,e)}),delete window.beaverLogQueue))}Object.defineProperty(n,"__esModule",{value:!0}),n.init=r;var o=t(10),i=t(3),a=t(12),u=t(2),c=!1},function(e,n,t){"use strict";function r(){return l?performance.now():Date.now()}function o(e){return e=void 0!==e?e:r(),{startTime:e,elapsed:function(){return parseInt(r()-e,10)},reset:function(){e=r()}}}function i(){if(l){var e=window.performance.timing;return parseInt(e.connectEnd-e.navigationStart,10)}}function a(){var e=o(),n=0;(0,d.safeInterval)(function(){if(!(c.config.heartbeatMaxThreshold&&n>c.config.heartbeatMaxThreshold)){n+=1;var t=e.elapsed(),r=t-c.config.heartbeatInterval,o={count:n,elapsed:t};c.config.heartbeatTooBusy&&(o.lag=r,r>=c.config.heartbeatTooBusyThreshold&&(0,s.info)("toobusy",o,{noConsole:!c.config.heartbeatConsoleLog})),(0,s.info)("heartbeat",o,{noConsole:!c.config.heartbeatConsoleLog})}},c.config.heartbeatInterval)}function u(){return l?((0,f.addPayloadBuilder)(function(){var e={};return e.client_elapsed=v.elapsed(),l&&(e.req_elapsed=h.elapsed()),e}),void(0,d.onWindowReady)().then(function(){var e=["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","fetchStart","loadEventEnd","loadEventStart","navigationStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","unloadEventEnd","unloadEventStart"],n={};e.forEach(function(e){n[e]=parseInt(window.performance.timing[e],10)||0});var t=n.connectEnd-n.navigationStart;n.connectEnd&&Object.keys(n).forEach(function(e){var r=n[e];r&&(0,s.info)("timing_"+e,{client_elapsed:parseInt(r-n.connectEnd-(v.startTime-t),10),req_elapsed:parseInt(r-n.connectEnd,10)})}),(0,s.info)("timing",n),(0,s.info)("memory",window.performance.memory),(0,s.info)("navigation",window.performance.navigation),window.performance.getEntries&&window.performance.getEntries().forEach(function(e){["link","script","img","css"].indexOf(e.initiatorType)>-1&&(0,s.info)(e.initiatorType,e)})})):(0,s.info)("no_performance_data")}Object.defineProperty(n,"__esModule",{value:!0}),n.reqTimer=n.clientTimer=void 0,n.now=r,n.reqStartElapsed=i,n.initHeartBeat=a,n.initPerformance=u;var c=t(10),s=t(2),f=t(9),d=t(3),l=window&&window.performance&&performance.now&&performance.timing&&performance.timing.connectEnd&&performance.timing.navigationStart&&Math.abs(performance.now()-Date.now())>1e3&&performance.now()-(performance.timing.connectEnd-performance.timing.navigationStart)>0,v=n.clientTimer=o(),h=n.reqTimer=o(i())},function(e,n,t){"use strict";function r(){h=(0,a.now)()}function o(e){h=h||(0,a.reqStartElapsed)();var n=(0,a.now)(),t=void 0;void 0!==h&&(t=parseInt(n-h,0));var r="transition_"+v+"_to_"+e;(0,u.info)(r,{duration:t}),(0,u.track)({transition:r,transition_time:t}),(0,u.immediateFlush)(),h=n,v=e,l=(0,s.uniqueID)()}function i(e){r(),o(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.startTransition=r,n.endTransition=o,n.transition=i;var a=t(12),u=t(2),c=t(9),s=t(3),f=t(10),d=(0,s.uniqueID)(),l=(0,s.uniqueID)(),v=f.config.initial_state_name,h=void 0;(0,c.addPayloadBuilder)(function(){return{windowID:d,pageID:l}}),(0,c.addMetaBuilder)(function(){return{state:"ui_"+v}})}])});